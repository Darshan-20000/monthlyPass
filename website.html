<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />

    <!-- Required for iPhone fullscreen -->
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- Status bar color + style -->
    <!-- Options: default, black, black-translucent -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Your custom status bar background color (iOS 15+) -->
    <meta name="theme-color" content="#202125">

    <title>Monthly Pass</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <link rel="stylesheet" href="style.css">

    <script>
        const linkElement = document.createElement('link');
        linkElement.rel = 'stylesheet';
        linkElement.type = 'text/css';
        const timestamp = new Date().getTime();
        linkElement.href = `color.css?t=${timestamp}`;
        document.head.appendChild(linkElement);
    </script>

    <script>
        function openPopup() {
            document.getElementById('popupModal').style.display = 'flex';
        }
        function closePopup() {
            document.getElementById('popupModal').style.display = 'none';
        }
    </script>

    <style>
        /* Required so black-translucent blends correctly */
        body {
            background: #202125;
            padding-top: env(safe-area-inset-top);
        }

        .header {
            background: #202125 !important;
        }
    </style>
</head>

<body>
    <script>
        function updateMonthProgress() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const totalDays = new Date(year, month + 1, 0).getDate();
            const currentDay = now.getDate();

            const progress = (currentDay / totalDays) * 100;

            document.querySelectorAll(".progress-fill").forEach(fill => {
                fill.style.width = progress + "%";
            });

            const remainingDays = totalDays - currentDay;
            document.querySelectorAll(".exp").forEach(exp => {
                exp.textContent = `Expires in ${remainingDays} day${remainingDays !== 1 ? 's' : ''}.`;
            });
        }

        window.onload = updateMonthProgress;
    </script>

    <script>
        const colors = ['#c488c4', '#44A25A', '#F2CED5', '#F5DF25', '#fe6366', '#0C84E9', '#8F8F8F'];
        let index = 0;

        function changeColor() {
            index = (index + 1) % colors.length;
            document.documentElement.style.setProperty('--first', colors[index]);
        }

        function increaseZone() {
            document.querySelectorAll('.big').forEach(zone => {
                let current = parseInt(zone.textContent, 10);
                if (current < 9) zone.textContent = current + 1;
            });
        }

        function decreaseZone() {
            document.querySelectorAll('.big').forEach(zone => {
                let current = parseInt(zone.textContent, 10);
                if (current > 1) zone.textContent = current - 1;
            });
        }
    </script>

    <!-- Your main layout stays the same -->
    <div>
        <div class="container-new">
            <div class="subContainer">
                <div class="header">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="#ffffff" d="M14.41 18.16L8.75 12.5l5.66-5.66l.7.71l-4.95 4.95l4.95 4.95z"/>
                    </svg>
                    <h2>Monthly Pass</h2>
                    <div class="right-empty"></div>
                </div>
            </div>

            <div class="card">
                <div class="top-section">
                    <div class="qr-box">
                        <div class="qr-inner">
                            <a href="#" onclick="openPopup(); return false;">
                                <img class="qr-code" src="qr.png" alt="QR Code">
                            </a>
                        </div>
                    </div>

                    <div class="tap-to-enlarge-new">Tap to enlarge</div>

                    <div class="divider"></div>

                    <div class="interstate">INTERSTATE</div>

                    <div class="date-zone">
                        <div class="date-box" onclick="changeColor()">Nov<br>2025</div>
                        <div>
                            <div class="overlay-new">
                                <div class="top-zone" onclick="decreaseZone()"></div>
                                <div class="bottom-zone" onclick="increaseZone()"></div>
                            </div>
                            <div class="zone-info">
                                <p class="big">2</p>
                                <p class="small">ZONE RIDE</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="color-strip">
                        <div class="color-block-new red"></div>
                        <div class="color-block-new green"></div>
                        <div class="color-block-new blue"></div>
                    </div>
                    <div class="bottom-section">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>

                    <div class="exp">Expires in 11 days.</div>
                    <div class="link">View Onboard Validator Instructions</div>
                </div>
            </div>
        </div>

        <div class="popupModal" id="popupModal">
            <div class="modal-top-section">
                <div class="modal-header">
                    <p class="modal-header-text">Monthly Pass</p>
                </div>
                <div class="modal-qr-box">
                    <div class="modal-qr-inner">
                        <img class="modal-qr-code" src="inner-qr.png" alt="QR Code">
                    </div>
                </div>

                <div class="modal-divider"></div>

                <div class="interstate">INTERSTATE</div>

                <div class="date-zone">
                    <div class="date-box">Nov<br>2025</div>
                    <div>
                        <div class="zone-info">
                            <p class="big">2</p>
                            <p class="small">ZONE RIDE</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-bottom-section">
                <div class="modal-color-strip">
                    <div class="color-block-new red"></div>
                    <div class="color-block-new green"></div>
                    <div class="color-block-new blue"></div>
                </div>

                <div class="modal-progress-section">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>

                <div class="exp">Expires in 11 days.</div>
                <div class="btn-view">
                    <div class="back-btn" onclick="closePopup()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="#ffffff" d="M14.41 18.16L8.75 12.5l5.66-5.66l.7.71l-4.95 4.95l4.95 4.95z"/>
                        </svg>
                        Back to ticket
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
