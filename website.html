<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=utf-8" />

<head>
    <meta charset="UTF-8" />
    <title>Monthly Pass</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#ffffff">
    <meta content='yes' name='apple-mobile-web-app-capable' />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta content='yes' name='mobile-web-app-capable' />
    <link rel="stylesheet" href="style.css">
    <script>
        const linkElement = document.createElement('link');
        linkElement.rel = 'stylesheet';
        linkElement.type = 'text/css';
        const timestamp = new Date().getTime();
        const updatedCssUrl = `color.css?t=${timestamp}`;
        linkElement.href = updatedCssUrl;
        document.head.appendChild(linkElement);
    </script>
    <script>
        function openPopup() {
            document.getElementById('popupModal').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popupModal').style.display = 'none';
        }

    </script>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: #1d86d7;
        }

        .safe-area {
            padding-top: env(safe-area-inset-top);
            background-color: #1d86d7;
            /* color of safe area */
            min-height: 100vh;
            box-sizing: border-box;
            position: fixed;
        }

        .content {
            background-color: #ffffff;
            height: 430vh;
            /* margin: 20px; */
            /* padding: 20px; */
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            function getShortMonthName(date) {
                // "Nov" (first letter uppercase, rest lowercase) using locale (works with different languages too)
                return date.toLocaleString('en-US', { month: 'short' });
            }

            function updateDateBoxesAndProgress() {
                const now = new Date();
                const year = now.getFullYear();
                const monthName = getShortMonthName(now).toUpperCase(); // "Nov"
                const totalDays = new Date(year, now.getMonth() + 1, 0).getDate();
                const currentDay = now.getDate();
                const progressPercent = (currentDay / totalDays) * 100;
                const remainingDays = totalDays - currentDay;

                // Update every .date-box (main card and modal)
                document.querySelectorAll('.date-box').forEach(box => {
                    // Do not overwrite the outer element attributes (like onclick)
                    // Only set innerHTML structure expected by your CSS
                    box.innerHTML = `<div>${monthName}</div>${year}<div></div>`;
                });

                // Update all progress fills
                document.querySelectorAll('.progress-fill').forEach(fill => {
                    fill.style.width = progressPercent + '%';
                });

                // Update all expiry texts
                document.querySelectorAll('.exp').forEach(exp => {
                    exp.textContent = `Expires in ${remainingDays} day${remainingDays !== 1 ? 's' : ''}.`;
                });
            }

            // Call once on load
            updateDateBoxesAndProgress();

            // Optional: refresh every hour/day â€” if you'd like it to auto-update over time uncomment:
            // setInterval(updateDateBoxesAndProgress, 1000 * 60 * 60); // every hour
        });
    </script>

    </script>
    <script>
        const colors = [
            '#c488c4',
            '#44A25A',
            '#F2CED5',
            '#F5DF25',
            '#fe6366',
            '#0C84E9',
            '#8F8F8F' ];
        let index = 0;

        function changeColor() {
            index = (index + 1) % colors.length; // loop through colors
            if (index == 0) {
                document.documentElement.style.setProperty('--first', '#c488c4');
            } else {
                document.documentElement.style.setProperty('--first', colors[ index ]);
            }
        }

        function increaseZone() {
            const zoneElements = document.querySelectorAll('.big'); // all .big elements
            zoneElements.forEach(zoneElement => {
                let currentZone = parseInt(zoneElement.textContent, 10);
                if (currentZone < 9) currentZone += 1;
                zoneElement.textContent = currentZone;
            });
        }

        function decreaseZone() {
            const zoneElements = document.querySelectorAll('.big'); // all .big elements
            zoneElements.forEach(zoneElement => {
                let currentZone = parseInt(zoneElement.textContent, 10);
                if (currentZone > 1) currentZone -= 1;
                zoneElement.textContent = currentZone;
            });
        }
        // changeColor()
    </script>
    <div class="safe-area">
        <div class="content">
            <div class="container-new">
                <div class="subContainer">
                    <div class="header">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24">
                            <path fill="#ffffff" d="M14.41 18.16L8.75 12.5l5.66-5.66l.7.71l-4.95 4.95l4.95 4.95z" />
                        </svg>
                        <h2>Monthly Pass</h2>
                        <div class="right-empty"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="top-section">
                        <div class="qr-box">
                            <!-- <div class="qr-inner"></div> -->
                            <div class="qr-inner">
                                <a href="#" onclick="openPopup(); return false;">
                                    <img class="qr-code" src="qr.png" alt="QR Code">
                                </a>
                            </div>
                        </div>

                        <div class="tap-to-enlarge-new">Tap to enlarge</div>

                        <div class="divider"></div>

                        <div class="interstate">INTERSTATE</div>

                        <div class="date-zone">
                            <div class="date-box" onclick="changeColor()">
                                <div>Oct</div>2024<div></div>
                            </div>
                            <div>
                                <div class="overlay-new">
                                    <div class="top-zone" onclick="decreaseZone()"></div>
                                    <div class="bottom-zone" onclick="increaseZone()"></div>
                                </div>
                                <div class="zone-info">
                                    <p class="big">2</p>
                                    <p class="small">ZONE RIDE</p>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div>
                        <div class="color-strip">
                            <div class="color-block-new red"></div>
                            <div class="color-block-new green"></div>
                            <div class="color-block-new blue"></div>
                        </div>
                        <div class="bottom-section">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                        </div>

                        <div class="exp">Expires in 11 days.</div>
                        <div class="link">View Onboard Validator Instructions</div>
                    </div>
                </div>
            </div>
            <div class="popupModal" id="popupModal">
                <div class="modal-top-section">
                    <div class="modal-header">
                        <p class="modal-header-text">Monthly Pass</p>
                    </div>
                    <div class="modal-qr-box">
                        <div class="modal-qr-inner">
                            <!-- <a href="#" onclick="openPopup(); return false;"> -->
                            <img class="modal-qr-code" src="inner-qr.png" alt="QR Code">
                            <!-- </a> -->
                        </div>
                    </div>

                    <!-- <div class="tap-to-enlarge-new">Tap to enlarge</div> -->

                    <div class="modal-divider"></div>

                    <div class="interstate">INTERSTATE</div>

                    <div class="date-zone">
                        <div class="date-box">Nov<br>2025</div>
                        <div>
                            <div class="zone-info">
                                <p class="big">2</p>
                                <p class="small">ZONE RIDE</p>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="modal-bottom-section">
                    <div class="modal-color-strip">
                        <div class="color-block-new red"></div>
                        <div class="color-block-new green"></div>
                        <div class="color-block-new blue"></div>
                    </div>
                    <div class="modal-progress-section">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>

                    <div class="exp">Expires in 11 days.</div>
                    <div class="btn-view">
                        <div class="back-btn" onclick="closePopup()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="#ffffff" d="M14.41 18.16L8.75 12.5l5.66-5.66l.7.71l-4.95 4.95l4.95 4.95z" />
                            </svg>
                            Back to ticket
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>